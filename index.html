<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cominegros - ¿Qué como Negro?</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #111111;
            --secondary-color: #ff4b3e;
            --accent-color: #ff8c70;
            --text-color: #333;
            --text-light: #777;
            --background-color: #f9f9f9;
            --card-color: #fff;
            --border-color: #eee;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            --radius: 0px;
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .dark-mode {
            --primary-color: #f9f9f9;
            --secondary-color: #ff4b3e;
            --accent-color: #ff8c70;
            --text-color: #f9f9f9;
            --text-light: #aaa;
            --background-color: #121212;
            --card-color: #1e1e1e;
            --border-color: #333;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: var(--transition);
            overflow-x: hidden;
        }

        h1, h2, h3, h4 {
            font-family: 'Bebas Neue', sans-serif;
            font-weight: 400;
            letter-spacing: 1px;
        }

        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        .hero {
            position: relative;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            margin-bottom: 0;
        }

        .hero-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://images.unsplash.com/photo-1556911220-bda9f7f7597e?ixlib=rb-1.2.1&auto=format&fit=crop&w=1500&q=80');
            background-size: cover;
            background-position: center;
            filter: brightness(0.4);
            z-index: -1;
        }

        .hero-content {
            text-align: center;
            color: white;
            max-width: 800px;
            padding: 0 20px;
            z-index: 1;
            transform: translateY(-50px);
        }

        .hero-title {
            font-size: 8rem;
            margin-bottom: 20px;
            line-height: 0.9;
            text-transform: uppercase;
        }

        .hero-subtitle {
            font-size: 2.5rem;
            margin-bottom: 30px;
            font-weight: 400;
            font-family: 'Bebas Neue', sans-serif;
        }

        .hero-description {
            font-size: 1.2rem;
            margin-bottom: 40px;
            opacity: 0.9;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .scroll-down {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 2rem;
            animation: bounce 2s infinite;
            cursor: pointer;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0) translateX(-50%);
            }
            40% {
                transform: translateY(-20px) translateX(-50%);
            }
            60% {
                transform: translateY(-10px) translateX(-50%);
            }
        }

        /* Navigation */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            padding: 20px 0;
            transition: var(--transition);
        }

        .navbar.scrolled {
            background-color: var(--card-color);
            box-shadow: var(--shadow);
            padding: 15px 0;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-logo {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2.5rem;
            font-weight: 400;
            color: white;
            text-decoration: none;
            transition: var(--transition);
            letter-spacing: 2px;
        }

        .navbar.scrolled .nav-logo {
            color: var(--primary-color);
        }

        .nav-links {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .nav-link {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            position: relative;
            padding: 5px 0;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--secondary-color);
            transition: var(--transition);
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .navbar.scrolled .nav-link {
            color: var(--text-color);
        }

        .theme-toggle {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1.5rem;
            transition: var(--transition);
        }

        .navbar.scrolled .theme-toggle {
            color: var(--text-color);
        }

        /* Main Content */
        .main-content {
            padding: 80px 0;
            background-color: var(--background-color);
            position: relative;
            z-index: 1;
        }

        /* Tabs */
        .tabs-container {
            margin-bottom: 60px;
        }

        .tabs {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-bottom: 60px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 20px;
        }

        .tab {
            font-size: 1.5rem;
            font-weight: 500;
            color: var(--text-light);
            cursor: pointer;
            padding-bottom: 8px;
            position: relative;
            transition: var(--transition);
            font-family: 'Bebas Neue', sans-serif;
            letter-spacing: 1px;
        }

        .tab::after {
            content: '';
            position: absolute;
            bottom: -20px;
            left: 0;
            width: 0;
            height: 3px;
            background-color: var(--secondary-color);
            transition: var(--transition);
        }

        .tab.active {
            color: var(--secondary-color);
        }

        .tab.active::after {
            width: 100%;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Categories */
        .category {
            margin-bottom: 100px;
        }

        .category-header {
            display: flex;
            align-items: center;
            margin-bottom: 40px;
        }

        .category-title {
            font-size: 3.5rem;
            position: relative;
            display: inline-block;
            margin-right: 20px;
            text-transform: uppercase;
        }

        .category-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 60px;
            height: 3px;
            background-color: var(--secondary-color);
        }

        .category-line {
            flex-grow: 1;
            height: 1px;
            background-color: var(--border-color);
        }

        /* Recipe Grid */
        .recipe-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 40px;
        }

        /* Recipe Card */
        .recipe-card {
            background-color: var(--card-color);
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            height: 100%;
            display: flex;
            flex-direction: column;
            position: relative;
            transform: translateY(0);
        }

        .recipe-card:hover {
            transform: translateY(-15px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .recipe-image {
            height: 300px;
            width: 100%;
            object-fit: cover;
            position: relative;
        }

        .recipe-image::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(0,0,0,0) 50%, rgba(0,0,0,0.7) 100%);
        }

        .recipe-tags {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: flex-end;
            z-index: 2;
        }

        .recipe-tag {
            background-color: var(--secondary-color);
            color: white;
            padding: 6px 12px;
            border-radius: 0;
            font-size: 0.75rem;
            font-weight: 600;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .recipe-content {
            padding: 30px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .recipe-title {
            font-size: 2rem;
            margin-bottom: 15px;
            line-height: 1.2;
            text-transform: uppercase;
        }

        .recipe-meta {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            color: var(--text-light);
        }

        .recipe-meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .recipe-description {
            color: var(--text-light);
            margin-bottom: 25px;
            line-height: 1.7;
            flex-grow: 1;
        }

        .recipe-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }

        .btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: var(--radius);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            font-family: 'Montserrat', sans-serif;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            background-color: var(--accent-color);
            transform: translateY(-3px);
        }

        .btn-outline {
            background-color: transparent;
            color: var(--secondary-color);
            border: 1px solid var(--secondary-color);
        }

        .btn-outline:hover {
            background-color: var(--secondary-color);
            color: white;
        }

        .btn-icon {
            background: none;
            border: none;
            color: var(--text-light);
            cursor: pointer;
            font-size: 1.5rem;
            transition: var(--transition);
        }

        .btn-icon:hover {
            color: var(--secondary-color);
        }

        /* Recipe Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            overflow-y: auto;
        }

        .modal-content {
            background-color: var(--card-color);
            margin: 50px auto;
            padding: 0;
            width: 90%;
            max-width: 1000px;
            border-radius: var(--radius);
            overflow: hidden;
            position: relative;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
        }

        .modal-header {
            padding: 30px;
            border-bottom: 1px solid var(--border-color);
            position: relative;
        }

        .modal-title {
            font-size: 3rem;
            margin-right: 40px;
            text-transform: uppercase;
        }

        .close-modal {
            position: absolute;
            top: 30px;
            right: 30px;
            font-size: 2rem;
            cursor: pointer;
            color: var(--text-light);
            background: none;
            border: none;
            transition: var(--transition);
        }

        .close-modal:hover {
            color: var(--secondary-color);
        }

        .modal-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-tab {
            padding: 20px 30px;
            cursor: pointer;
            font-weight: 500;
            position: relative;
            transition: var(--transition);
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.2rem;
            letter-spacing: 1px;
        }

        .modal-tab::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 3px;
            background-color: var(--secondary-color);
            transition: var(--transition);
        }

        .modal-tab.active {
            color: var(--secondary-color);
        }

        .modal-tab.active::after {
            width: 100%;
        }

        .modal-body {
            padding: 40px;
        }

        .modal-tab-content {
            display: none;
        }

        .modal-tab-content.active {
            display: block;
        }

        .recipe-detail-image {
            width: 100%;
            height: 450px;
            object-fit: cover;
            border-radius: var(--radius);
            margin-bottom: 40px;
        }

        .recipe-detail-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 50px;
        }

        .ingredients-list {
            list-style: none;
        }

        .ingredient-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
            font-size: 1.05rem;
        }

        .ingredient-name {
            color: var(--text-color);
        }

        .ingredient-amount {
            color: var(--text-light);
        }

        .steps-list {
            list-style: none;
            counter-reset: step-counter;
        }

        .step-item {
            position: relative;
            padding-left: 50px;
            margin-bottom: 30px;
            font-size: 1.05rem;
            line-height: 1.8;
        }

        .step-item::before {
            content: counter(step-counter);
            counter-increment: step-counter;
            position: absolute;
            left: 0;
            top: 0;
            width: 35px;
            height: 35px;
            background-color: var(--secondary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        /* Calculator */
        .calculator-form {
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            background-color: var(--card-color);
            color: var(--text-color);
            font-family: 'Montserrat', sans-serif;
            font-size: 1rem;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--secondary-color);
        }

        .calculated-ingredients {
            margin-top: 30px;
            padding: 25px;
            background-color: var(--background-color);
            border-radius: var(--radius);
        }

        .calculated-total {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            font-size: 1.1rem;
        }

        /* Timer */
        .timer-container {
            margin-bottom: 30px;
        }

        .timer-item {
            background-color: var(--background-color);
            border-radius: var(--radius);
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .timer-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .timer-name {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .timer-time {
            font-family: monospace;
            font-size: 1.4rem;
            font-weight: 600;
        }

        .timer-progress {
            height: 10px;
            background-color: var(--border-color);
            border-radius: 5px;
            margin-bottom: 25px;
            overflow: hidden;
        }

        .timer-progress-bar {
            height: 100%;
            background-color: var(--secondary-color);
            width: 0%;
            transition: width 1s linear;
        }

        .timer-controls {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
        }

        /* Search */
        .search-container {
            max-width: 900px;
            margin: 0 auto 80px;
        }

        .search-title {
            font-size: 3.5rem;
            margin-bottom: 20px;
            text-align: center;
            text-transform: uppercase;
        }

        .search-description {
            margin-bottom: 40px;
            color: var(--text-light);
            font-size: 1.1rem;
            text-align: center;
        }

        .search-input-container {
            position: relative;
            margin-bottom: 40px;
        }

        .search-input {
            width: 100%;
            padding: 18px 60px 18px 25px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            background-color: var(--card-color);
            color: var(--text-color);
            font-size: 1.1rem;
            font-family: 'Montserrat', sans-serif;
            box-shadow: var(--shadow);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--secondary-color);
        }

        .search-icon {
            position: absolute;
            right: 25px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
            font-size: 1.3rem;
        }

        .search-suggestions {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            background-color: var(--card-color);
            border: 1px solid var(--border-color);
            border-top: none;
            border-radius: 0 0 var(--radius) var(--radius);
            max-height: 300px;
            overflow-y: auto;
            z-index: 10;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .search-suggestion-item {
            padding: 15px 25px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
        }

        .search-suggestion-item:hover {
            background-color: var(--background-color);
            color: var(--secondary-color);
        }

        .selected-ingredients {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 40px;
        }

        .ingredient-tag {
            background-color: var(--secondary-color);
            color: white;
            padding: 10px 20px;
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1rem;
            font-weight: 500;
            transition: var(--transition);
        }

        .ingredient-tag:hover {
            background-color: var(--accent-color);
            transform: translateY(-3px);
        }

        .remove-ingredient {
            cursor: pointer;
            font-weight: bold;
        }

        .search-button-container {
            text-align: center;
            margin-bottom: 50px;
        }

        .search-results {
            margin-top: 50px;
        }

        .search-results-title {
            font-size: 2.5rem;
            margin-bottom: 40px;
            text-align: center;
            text-transform: uppercase;
        }

        .no-results {
            text-align: center;
            padding: 80px 40px;
            background-color: var(--card-color);
            border-radius: var(--radius);
            color: var(--text-light);
            box-shadow: var(--shadow);
        }

        /* Expanded Ingredients */
        .expanded-ingredients {
            padding: 25px;
            border-top: 1px solid var(--border-color);
        }

        .expanded-ingredients h4 {
            margin-bottom: 15px;
            font-size: 1.1rem;
            text-transform: uppercase;
        }

        .ingredient-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .ingredient-chip {
            background-color: var(--background-color);
            padding: 8px 15px;
            border-radius: var(--radius);
            font-size: 0.9rem;
            font-weight: 500;
        }

        /* Vegetarian Section */
        .vegetarian-section {
            background-color: var(--card-color);
            padding: 80px 0;
            margin: 80px 0;
            position: relative;
        }

        .vegetarian-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://images.unsplash.com/photo-1615485290382-441e4d049cb5?ixlib=rb-1.2.1&auto=format&fit=crop&w=1500&q=80');
            background-size: cover;
            background-position: center;
            opacity: 0.1;
            z-index: 0;
        }

        .vegetarian-content {
            position: relative;
            z-index: 1;
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .vegetarian-title {
            font-size: 3.5rem;
            margin-bottom: 30px;
            text-transform: uppercase;
            color: var(--secondary-color);
        }

        .vegetarian-description {
            font-size: 1.1rem;
            margin-bottom: 40px;
            line-height: 1.8;
        }

        .vegetarian-steps {
            text-align: left;
            margin-top: 40px;
            background-color: var(--background-color);
            padding: 30px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        .vegetarian-steps h3 {
            margin-bottom: 20px;
            font-size: 1.8rem;
            text-transform: uppercase;
        }

        .vegetarian-steps ol {
            padding-left: 20px;
        }

        .vegetarian-steps li {
            margin-bottom: 15px;
            line-height: 1.7;
        }

        /* Tips Section */
        .tips-section {
            padding: 80px 0;
            background-color: var(--background-color);
        }

        .tips-title {
            font-size: 3.5rem;
            margin-bottom: 50px;
            text-align: center;
            text-transform: uppercase;
        }

        .tips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
        }

        .tip-card {
            background-color: var(--card-color);
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .tip-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .tip-header {
            background-color: var(--secondary-color);
            color: white;
            padding: 20px;
        }

        .tip-title {
            font-size: 1.8rem;
            margin-bottom: 0;
            text-transform: uppercase;
        }

        .tip-content {
            padding: 25px;
            flex-grow: 1;
            line-height: 1.8;
        }

        /* Footer */
        footer {
            background-color: var(--primary-color);
            color: white;
            padding: 80px 0;
            margin-top: 0;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .footer-logo {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 3rem;
            font-weight: 400;
            letter-spacing: 2px;
        }

        .footer-text {
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.1rem;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .recipe-grid {
                grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
                gap: 30px;
            }
            
            .hero-title {
                font-size: 6rem;
            }
            
            .hero-subtitle {
                font-size: 2rem;
            }
        }

        @media (max-width: 992px) {
            .recipe-detail-grid {
                grid-template-columns: 1fr;
                gap: 40px;
            }
            
            .modal-content {
                width: 95%;
                margin: 30px auto;
            }
            
            .recipe-detail-image {
                height: 350px;
            }
            
            .hero {
                height: 80vh;
            }
            
            .hero-title {
                font-size: 5rem;
            }
            
            .tips-grid {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .recipe-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
            
            .tabs {
                flex-wrap: wrap;
                gap: 20px;
            }
            
            .footer-content {
                flex-direction: column;
                text-align: center;
                gap: 20px;
            }
            
            .hero-title {
                font-size: 4rem;
            }
            
            .hero-subtitle {
                font-size: 1.5rem;
            }
            
            .modal-tabs {
                flex-wrap: wrap;
            }
            
            .modal-tab {
                flex: 1;
                text-align: center;
                padding: 15px;
            }
            
            .nav-links {
                display: none;
            }
            
            .mobile-menu-toggle {
                display: block;
            }
        }

        @media (max-width: 576px) {
            .recipe-grid {
                grid-template-columns: 1fr;
            }
            
            .hero {
                height: 70vh;
            }
            
            .hero-title {
                font-size: 3.5rem;
            }
            
            .hero-subtitle {
                font-size: 1.3rem;
            }
            
            .hero-description {
                font-size: 1rem;
            }
            
            .modal-body {
                padding: 25px;
            }
            
            .modal-title {
                font-size: 2rem;
            }
            
            .step-item {
                padding-left: 40px;
            }
            
            .step-item::before {
                width: 30px;
                height: 30px;
            }
            
            .category-title {
                font-size: 2.5rem;
            }
            
            .vegetarian-title, 
            .tips-title,
            .search-title {
                font-size: 2.5rem;
            }
        }

        /* Mobile Menu */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
        }

        .navbar.scrolled .mobile-menu-toggle {
            color: var(--text-color);
        }

        .mobile-menu {
            position: fixed;
            top: 0;
            right: -100%;
            width: 80%;
            height: 100%;
            background-color: var(--card-color);
            z-index: 1001;
            padding: 80px 40px;
            transition: right 0.3s ease;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
        }

        .mobile-menu.active {
            right: 0;
        }

        .mobile-menu-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 1.8rem;
            cursor: pointer;
        }

        .mobile-menu-links {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .mobile-menu-link {
            color: var(--text-color);
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 500;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="container nav-container">
            <a href="#" class="nav-logo">Cominegros</a>
            <div class="nav-links">
                <a href="#browse" class="nav-link">Explorar</a>
                <a href="#search" class="nav-link">Buscar</a>
                <a href="#vegetarian" class="nav-link">Vegetariano</a>
                <a href="#tips" class="nav-link">Tips</a>
                <button class="theme-toggle" id="themeToggle">🌙</button>
            </div>
            <button class="mobile-menu-toggle" id="mobileMenuToggle">☰</button>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobileMenu">
        <button class="mobile-menu-close" id="mobileMenuClose">✕</button>
        <div class="mobile-menu-links">
            <a href="#browse" class="mobile-menu-link">Explorar</a>
            <a href="#search" class="mobile-menu-link">Buscar</a>
            <a href="#vegetarian" class="mobile-menu-link">Vegetariano</a>
            <a href="#tips" class="mobile-menu-link">Tips</a>
            <button class="theme-toggle" id="mobileThemeToggle" style="align-self: flex-start; margin-top: 20px;">🌙</button>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-bg"></div>
        <div class="hero-content">
            <h1 class="hero-title">Cominegros</h1>
            <p class="hero-subtitle">¿Qué como Negro?</p>
            <p class="hero-description">¡Bienvenidos a mi recetario! Este es solo el comienzo; juntos iremos añadiendo nuevas recetas, tanto en esta página como en la mesa.</p>
        </div>
        <div class="scroll-down" id="scrollDown">↓</div>
    </section>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Tabs -->
            <div class="tabs-container" id="browse">
                <div class="tabs">
                    <div class="tab active" data-tab="browse">Explorar Recetas</div>
                    <div class="tab" data-tab="search">Buscar por Ingredientes</div>
                </div>

                <!-- Browse Tab Content -->
                <div class="tab-content active" id="browseTab">
                    <!-- Salsas y Cremas -->
                    <section class="category" id="salsas">
                        <div class="category-header">
                            <h2 class="category-title">Salsas y Cremas</h2>
                            <div class="category-line"></div>
                        </div>
                        <div class="recipe-grid" id="salsasGrid">
                            <!-- Recipe cards will be inserted here by JavaScript -->
                        </div>
                    </section>

                    <!-- Entradas -->
                    <section class="category" id="entradas">
                        <div class="category-header">
                            <h2 class="category-title">Entradas</h2>
                            <div class="category-line"></div>
                        </div>
                        <div class="recipe-grid" id="entradasGrid">
                            <!-- Recipe cards will be inserted here by JavaScript -->
                        </div>
                    </section>

                    <!-- Platos Principales -->
                    <section class="category" id="principales">
                        <div class="category-header">
                            <h2 class="category-title">Platos Principales</h2>
                            <div class="category-line"></div>
                        </div>
                        <div class="recipe-grid" id="principalesGrid">
                            <!-- Recipe cards will be inserted here by JavaScript -->
                        </div>
                    </section>

                    <!-- Postres -->
                    <section class="category" id="postres">
                        <div class="category-header">
                            <h2 class="category-title">Postres</h2>
                            <div class="category-line"></div>
                        </div>
                        <div class="recipe-grid" id="postresGrid">
                            <!-- Recipe cards will be inserted here by JavaScript -->
                        </div>
                    </section>
                </div>

                <!-- Search Tab Content -->
                <div class="tab-content" id="searchTab">
                    <div class="search-container" id="search">
                        <h2 class="search-title">Buscar por Ingredientes</h2>
                        <p class="search-description">Selecciona los ingredientes que tenés en casa y te mostraremos recetas que podés preparar.</p>
                        
                        <div class="search-input-container">
                            <input type="text" id="ingredientSearch" class="search-input" placeholder="Escribe un ingrediente...">
                            <span class="search-icon">🔍</span>
                            <div class="search-suggestions" id="searchSuggestions"></div>
                        </div>
                        
                        <div class="selected-ingredients" id="selectedIngredients"></div>
                        
                        <div class="search-button-container">
                            <button class="btn" id="searchButton">Buscar Recetas</button>
                        </div>
                        
                        <div class="search-results" id="searchResults"></div>
                    </div>
                </div>
            </div>

            <!-- Vegetarian Section -->
            <section class="vegetarian-section" id="vegetarian">
                <div class="vegetarian-content">
                    <h2 class="vegetarian-title">Opciones Vegetarianas</h2>
                    <p class="vegetarian-description">¿Buscás alternativas sin carne? Podés reemplazar la carne en muchas de nuestras recetas con opciones vegetarianas. Una de nuestras favoritas es el Katsu de Berenjena Ahumada, que podés usar en lugar de la carne en recetas como el Katsudon o Katsu Curry.</p>
                    
                    <div class="vegetarian-steps">
                        <h3>Katsu de Berenjena Ahumada</h3>
                        <ol>
                            <li>Pelar una berenjena sin sacarle el tallo.</li>
                            <li>Untar la berenjena con aceite de oliva, pimienta y un poco de sal.</li>
                            <li>Envolverla en aluminio y dejarla en el horno a fuego fuerte por 15-20 minutos.</li>
                            <li>Una vez que la sacas, la berenjena tiene que estar blanda como para aplastarla de a poquito, pero no se tiene que deshacer.</li>
                            <li>Cuando la tengas de un ancho considerado para una milanesa (1-1.5 cm), pasala por harina, después por huevo y finalmente por panko.</li>
                            <li>Freíla en aceite abundante y caliente, sacala cuando esté dorada, y rallale limón apenas sale.</li>
                        </ol>
                        
                        <h3>Opción Sin TACC</h3>
                        <p>Podés cambiar el panko por panko sin TACC. En este caso, en vez de pasar el producto crudo en la harina, pasalo primero por el panko sin TACC, luego por el huevo y por último el panko sin TACC nuevamente.</p>
                    </div>
                </div>
            </section>

            <!-- Tips Section -->
            <section class="tips-section" id="tips">
                <div class="container">
                    <h2 class="tips-title">Tips de Cocina</h2>
                    
                    <div class="tips-grid">
                        <div class="tip-card">
                            <div class="tip-header">
                                <h3 class="tip-title">Freír Correctamente</h3>
                            </div>
                            <div class="tip-content">
                                <p>Siempre freí en abundante aceite. Contrario a lo que se cree, si el aceite es poco, el producto absorbe mucho más y se cocina disparejamente. Con aceite abundante, el producto queda más crujiente y menos grasoso.</p>
                            </div>
                        </div>
                        
                        <div class="tip-card">
                            <div class="tip-header">
                                <h3 class="tip-title">Escurrir sin Perder Crocancia</h3>
                            </div>
                            <div class="tip-content">
                                <p>Al freír, cuando sacamos el producto ya dorado, solemos ponerlo en un plato con papel absorbente para sacarle el exceso de aceite, pero esto termina quitándole propiedades como lo crujiente. Te recomiendo usar una fuente para horno con rejilla, y colocar el producto ahí. No perderá ninguna propiedad y el exceso de aceite se escurrirá. Este es el momento justo para ponerle ralladura de limón y una pizca de sal.</p>
                            </div>
                        </div>
                        
                        <div class="tip-card">
                            <div class="tip-header">
                                <h3 class="tip-title">Risotto Creativo</h3>
                            </div>
                            <div class="tip-content">
                                <p>Cuando haces risotto, recordá que podés abrir tu imaginación. La receta que te paso yo es de curry, pero podés hacer miles de formas. Lo importante es que juegues. Por ejemplo, se puede hacer un risotto clásico, y al final ponerle la crema de champiñones o la crema de boniato que te enseñé a hacer anteriormente.</p>
                            </div>
                        </div>
                        
                        <div class="tip-card">
                            <div class="tip-header">
                                <h3 class="tip-title">Caramelizar Cebollas</h3>
                            </div>
                            <div class="tip-content">
                                <p>Para caramelizar cebollas correctamente, cortarlas en pluma y cocinarlas a fuego muy bajo con un poco de manteca y sal. La paciencia es clave: toma entre 30-40 minutos, pero el resultado vale la pena. Revolvé ocasionalmente y no subas el fuego para acelerar el proceso, ya que se quemarían en vez de caramelizarse.</p>
                            </div>
                        </div>
                        
                        <div class="tip-card">
                            <div class="tip-header">
                                <h3 class="tip-title">Salsas Versátiles</h3>
                            </div>
                            <div class="tip-content">
                                <p>Las salsas y cremas que te enseño pueden usarse de múltiples formas. La crema de boniato puede ser base para un plato, dip para vegetales o aderezo para carnes. Experimentá combinando diferentes salsas con distintos platos para descubrir nuevos sabores.</p>
                            </div>
                        </div>
                        
                        <div class="tip-card">
                            <div class="tip-header">
                                <h3 class="tip-title">Preparación Anticipada</h3>
                            </div>
                            <div class="tip-content">
                                <p>Muchas de estas recetas tienen componentes que pueden prepararse con anticipación. Las salsas, cremas y rellenos suelen mejorar su sabor después de un día en la heladera, lo que te permite distribuir el trabajo de cocina y reducir el estrés al momento de servir.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Recipe Modal -->
    <div class="modal" id="recipeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Título de la Receta</h2>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            
            <div class="modal-tabs">
                <div class="modal-tab active" data-tab="recipe">Receta</div>
                <div class="modal-tab" data-tab="calculator">Calculadora</div>
                <div class="modal-tab" data-tab="timer">Temporizador</div>
            </div>
            
            <div class="modal-body">
                <!-- Recipe Tab -->
                <div class="modal-tab-content active" id="recipeTab">
                    <img src="/placeholder.svg" alt="" class="recipe-detail-image" id="modalImage">
                    
                    <div class="recipe-detail-grid">
                        <div>
                            <h3>Ingredientes</h3>
                            <ul class="ingredients-list" id="modalIngredients"></ul>
                        </div>
                        
                        <div>
                            <h3>Preparación</h3>
                            <ol class="steps-list" id="modalSteps"></ol>
                        </div>
                    </div>
                </div>
                
                <!-- Calculator Tab -->
                <div class="modal-tab-content" id="calculatorTab">
                    <h3>Calculadora de Cantidad y Costo</h3>
                    
                    <div class="calculator-form">
                        <div class="form-group">
                            <label for="servingsInput" class="form-label">Cantidad de <span id="servingType">Porciones</span></label>
                            <input type="number" id="servingsInput" class="form-input" min="1" value="4">
                        </div>
                        
                        <button class="btn" id="calculateButton">Calcular</button>
                    </div>
                    
                    <div class="calculated-ingredients hidden" id="calculatedIngredients">
                        <h4>Ingredientes Ajustados:</h4>
                        <ul class="ingredients-list" id="calculatedIngredientsList"></ul>
                        
                        <div class="calculated-total">
                            <span>Costo Total Aproximado:</span>
                            <span id="calculatedTotal">$0.00</span>
                        </div>
                    </div>
                </div>
                
                <!-- Timer Tab -->
                <div class="modal-tab-content" id="timerTab">
                    <h3>Temporizadores de Cocina</h3>
                    
                    <div id="timersContainer" class="timer-container">
                        <!-- Timers will be inserted here by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container footer-content">
            <div class="footer-logo">Cominegros</div>
            <p class="footer-text">© 2025 Cominegros. Creado con ❤️ por Martín Moore.</p>
        </div>
    </footer>

    <script>
        // Recipe Data
        const categories = [
            { id: 'salsas', name: 'Salsas y Cremas' },
            { id: 'entradas', name: 'Entradas' },
            { id: 'principales', name: 'Platos Principales' },
            { id: 'postres', name: 'Postres' }
        ];

        const recipes = [
            {
                id: 'crema-boniato',
                name: 'Crema de Boniato',
                categoryId: 'salsas',
                description: 'Una deliciosa crema de boniato, perfecta como base para platos, como dip o como aderezo.',
                image: 'https://images.unsplash.com/photo-1547592180-85f173990554?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                servings: 4,
                servingType: 'Porciones',
                time: 30,
                baseCost: 3.1,
                tags: ['Vegetariano', 'Sin Gluten'],
                ingredients: [
                    { name: 'Boniatos medianos', quantity: 2, unit: 'unidades', cost: 2 },
                    { name: 'Diente de ajo', quantity: 1, unit: 'diente', cost: 0.2 },
                    { name: 'Manteca', quantity: 50, unit: 'g', cost: 0.5 },
                    { name: 'Leche', quantity: 50, unit: 'ml', cost: 0.2 },
                    { name: 'Sal y pimienta', quantity: 1, unit: 'pizca', cost: 0.1 },
                    { name: 'Peperoncino', quantity: 1, unit: 'pizca', cost: 0.1 }
                ],
                steps: [
                    'Hervir agua en una olla, pelar los boniatos, cortarlos en trozos y meterlos al agua hirviendo junto con el diente de ajo.',
                    'Esperar a que el boniato esté blando (unos 15-20 minutos), colarlo y pasarlo a un vaso para mixear.',
                    'Agregar la leche, sal y pimienta al gusto (si querés un poco de picante, recomiendo el peperoncino).',
                    'Mixear todo, incorporar la manteca y mixear una vez más hasta que quede cremoso. ¡Ya está listo!',
                    'Se puede usar como base para platos, como dip o como aderezo. Lo bueno de esta crema es que podés variar la verdura y hacerla de remolacha, zanahoria, papa, etc.'
                ]
            },
            {
                id: 'manteca-miso',
                name: 'Manteca Miso',
                categoryId: 'salsas',
                description: 'Una manteca aromatizada con miso, miel y limón, ideal para acompañar carnes, pescados o verduras.',
                image: 'https://images.unsplash.com/photo-1589985270958-a664e7c51a82?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                servings: 6,
                servingType: 'Porciones',
                time: 15,
                baseCost: 3.7,
                tags: ['Vegetariano'],
                ingredients: [
                    { name: 'Manteca', quantity: 200, unit: 'g', cost: 2 },
                    { name: 'Pasta de miso', quantity: 30, unit: 'g', cost: 1 },
                    { name: 'Miel', quantity: 15, unit: 'g', cost: 0.3 },
                    { name: 'Ralladura de limón', quantity: 1, unit: 'limón', cost: 0.2 }
                ],
                steps: [
                    'Derretir la manteca a fuego bajo.',
                    'Una vez derretida, verterla en un bowl frío colocado sobre hielo.',
                    'Agregar el miso, la miel y la ralladura de limón, y batir hasta que la manteca se solidifique nuevamente.',
                    'Si es para consumir en el momento, ponerla en un cuenquito. De lo contrario, pasarla a un film, darle forma cilíndrica y guardarla en la heladera.'
                ]
            },
            {
                id: 'dip-mediterraneo',
                name: 'Dip Mediterráneo',
                categoryId: 'salsas',
                description: 'Un dip mediterráneo con aceitunas, tomates secos y aceite de oliva, perfecto para acompañar pan o vegetales.',
                image: 'https://images.unsplash.com/photo-1505575967455-40e256f73376?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                servings: 4,
                servingType: 'Porciones',
                time: 10,
                baseCost: 5,
                tags: ['Vegetariano', 'Vegano', 'Sin Gluten'],
                ingredients: [
                    { name: 'Aceitunas sin carozo', quantity: 100, unit: 'g', cost: 1.5 },
                    { name: 'Tomates secos', quantity: 100, unit: 'g', cost: 2 },
                    { name: 'Aceite de oliva', quantity: 50, unit: 'ml', cost: 0.5 },
                    { name: 'Aceto balsámico', quantity: 20, unit: 'ml', cost: 0.3 },
                    { name: 'Queso parmesano rallado', quantity: 20, unit: 'g', cost: 0.5 },
                    { name: 'Ralladura de limón', quantity: 1, unit: 'limón', cost: 0.2 }
                ],
                steps: [
                    'Cortar las aceitunas y los tomates secos en trozos pequeños, ponerlos en un plato plano y cubrirlos con el aceite de oliva.',
                    'Agregar el aceto balsámico en la superficie.',
                    'Opcionalmente, podés rallarle un poco de queso parmesano o agregar unas ralladuras de limón para darle un toque extra.'
                ]
            },
            {
                id: 'salsa-katsu',
                name: 'Salsa Katsu',
                categoryId: 'salsas',
                description: 'Una salsa dulce y salada perfecta para acompañar el katsu de cerdo o vegetariano.',
                image: 'https://images.unsplash.com/photo-1585032226651-759b368d7246?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                servings: 6,
                servingType: 'Porciones',
                time: 5,
                baseCost: 1.2,
                tags: ['Vegetariano', 'Rápido'],
                ingredients: [
                    { name: 'Kétchup', quantity: 120, unit: 'ml', cost: 0.5 },
                    { name: 'Salsa de soja', quantity: 30, unit: 'ml', cost: 0.3 },
                    { name: 'Azúcar', quantity: 10, unit: 'g', cost: 0.1 },
                    { name: 'Salsa inglesa', quantity: 30, unit: 'ml', cost: 0.3 }
                ],
                steps: [
                    'En un bowl, agregar las 2 cucharaditas de azúcar, las 2 cucharadas de salsa de soja, las 2 cucharadas de salsa inglesa y la media taza de kétchup.',
                    'Mezclar todo bien y ¡ya está! Es una salsa a ojo, así que podés ajustar las cantidades según tu gusto.'
                ]
            },
            {
                id: 'crema-champinones',
                name: 'Crema de Champiñones y Cebolla',
                categoryId: 'salsas',
                description: 'Una cremosa y sabrosa salsa de champiñones con cebolla caramelizada, perfecta para acompañar carnes o pastas.',
                image: 'https://images.unsplash.com/photo-1574448857443-dc1d7e9c4dad?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                servings: 4,
                servingType: 'Porciones',
                time: 50,
                baseCost: 6.1,
                tags: ['Vegetariano'],
                ingredients: [
                    { name: 'Cebollas medianas', quantity: 2, unit: 'unidades', cost: 1 },
                    { name: 'Champiñones', quantity: 200, unit: 'g', cost: 2 },
                    { name: 'Crema de leche', quantity: 200, unit: 'ml', cost: 1.5 },
                    { name: 'Manteca', quantity: 50, unit: 'g', cost: 0.5 },
                    { name: 'Sal y pimienta', quantity: 1, unit: 'pizca', cost: 0.1 },
                    { name: 'Queso rallado', quantity: 50, unit: 'g', cost: 1 }
                ],
                steps: [
                    'Cortar las cebollas en pluma y caramelizarlas a fuego bajo con un poco de aceite (unos 30-40 minutos, hasta que estén doradas).',
                    'Agregar los champiñones y cocinar hasta que estén blandos (unos 10 minutos).',
                    'Incorporar la crema de leche, dejar que se caliente un poco (sin que hierva).',
                    'Triturar la mezcla con la manteca, pimienta, sal y el queso rallado hasta obtener una crema suave.'
                ]
            },
            {
                id: 'croquetas-risotto',
                name: 'Croquetas de Risotto',
                categoryId: 'entradas',
                description: 'Deliciosas croquetas hechas con risotto sobrante, perfectas como aperitivo o entrada.',
                image: 'https://images.unsplash.com/photo-1604908176997-125f25cc6f3d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                servings: 10,
                servingType: 'Croquetas',
                time: 30,
                baseCost: 4.7,
                tags: ['Vegetariano', 'Aprovechamiento'],
                ingredients: [
                    { name: 'Risotto cocido (sobrante)', quantity: 300, unit: 'g', cost: 2 },
                    { name: 'Panko', quantity: 100, unit: 'g', cost: 1 },
                    { name: 'Harina', quantity: 50, unit: 'g', cost: 0.2 },
                    { name: 'Huevos', quantity: 2, unit: 'unidades', cost: 0.5 },
                    { name: 'Aceite para freír', quantity: 500, unit: 'ml', cost: 1 }
                ],
                steps: [
                    'Con el risotto frío, formar croquetas medianas.',
                    'Pasarlas primero por harina, luego por huevo batido y finalmente por panko.',
                    'Calentar el aceite (que cubra completamente las croquetas) a fuego medio-alto y freírlas hasta que estén doradas (unos 2-3 minutos por lado).',
                    'Se pueden servir coronadas con la crema de boniato y una salsa aioli.'
                ]
            },
            {
                id: 'croquetas-osobuco',
                name: 'Croquetas de Osobuco',
                categoryId: 'entradas',
                description: 'Croquetas cremosas hechas con osobuco desmenuzado y cebolla caramelizada, un aperitivo irresistible.',
                image: 'https://images.unsplash.com/photo-1626200419199-391ae4be7a9c?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                servings: 15,
                servingType: 'Croquetas',
                time: 180,
                baseCost: 11.15,
                tags: ['Gourmet', 'Preparación Anticipada'],
                ingredients: [
                    { name: 'Cebollas medianas', quantity: 2, unit: 'unidades', cost: 1 },
                    { name: 'Osobuco', quantity: 500, unit: 'g', cost: 5 },
                    { name: 'Caldo de carne', quantity: 1, unit: 'litro', cost: 2 },
                    { name: 'Panko', quantity: 100, unit: 'g', cost: 1 },
                    { name: 'Manteca (para la bechamel)', quantity: 75, unit: 'g', cost: 0.75 },
                    { name: 'Harina (para la bechamel)', quantity: 75, unit: 'g', cost: 0.3 },
                    { name: 'Leche (para la bechamel)', quantity: 100, unit: 'ml', cost: 0.3 },
                    { name: 'Huevos', quantity: 2, unit: 'unidades', cost: 0.5 },
                    { name: 'Aceite para freír', quantity: 500, unit: 'ml', cost: 1 },
                    { name: 'Sal y pimienta', quantity: 1, unit: 'pizca', cost: 0.1 }
                ],
                steps: [
                    'Hacer un caldo de carne y cocinar el osobuco en él a fuego bajo durante 2 horas, hasta que esté tierno. Desmenuzar la carne y reservar.',
                    'Para la cebolla caramelizada, cortar las cebollas en pluma, ponerlas en una sartén a fuego bajo con un poco de aceite de oliva y un pedazo de manteca, agregar sal y cocinar lentamente (unos 30-40 minutos) hasta que estén doradas, sin que se quemen. Mezclar la cebolla caramelizada con la carne desmenuzada y reservar.',
                    'Para la bechamel, derretir 75 g de manteca a fuego lento en una ollita, agregar 75 g de harina y mezclar hasta que no huela a crudo (unos 2-3 minutos). Incorporar 100 ml de leche fría, revolver constantemente hasta que la mezcla espese y salgan burbujas grandes (unos 5 minutos). Apagar el fuego, agregar sal y pimienta, y verter la bechamel sobre la mezcla de carne y cebolla.',
                    'Tapar la superficie con un film (para que no se forme una película) y dejar enfriar fuera de la heladera. Una vez fría, meterla en la heladera toda la noche.',
                    'Al día siguiente, calentar el aceite a fuego medio-alto. Formar bolas con la masa fría, pasarlas por harina, luego por huevo batido, después por panko y freírlas en el aceite caliente hasta que se doren (unos 2-3 minutos por lado). Sacarlas y escurrirlas sobre una rejilla.'
                ]
            },
            {
                id: 'empanadas-carne',
                name: 'Empanadas de Carne',
                categoryId: 'entradas',
                description: 'Clásicas empanadas argentinas con un relleno jugoso de carne y verduras.',
                image: 'https://images.unsplash.com/photo-1609525313344-a56b96e9afcf?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                servings: 36,
                servingType: 'Empanadas',
                time: 120,
                baseCost: 16.9,
                tags: ['Clásico', 'Para Compartir'],
                ingredients: [
                    { name: 'Zanahoria', quantity: 1, unit: 'unidad', cost: 0.5 },
                    { name: 'Cebollas medianas', quantity: 2, unit: 'unidades', cost: 1 },
                    { name: 'Apio', quantity: 3, unit: 'tallos', cost: 0.5 },
                    { name: 'Salsa de tomate', quantity: 800, unit: 'g', cost: 2 },
                    { name: 'Carne picada', quantity: 1.5, unit: 'kg', cost: 7 },
                    { name: 'Tapas de empanadas', quantity: 36, unit: 'unidades', cost: 3 },
                    { name: 'Aceite de oliva', quantity: 50, unit: 'ml', cost: 0.5 },
                    { name: 'Orégano, pimienta y sal', quantity: 1, unit: 'pizca', cost: 0.3 },
                    { name: 'Vino tinto', quantity: 50, unit: 'ml', cost: 0.5 },
                    { name: 'Hoja de laurel', quantity: 1, unit: 'hoja', cost: 0.1 },
                    { name: 'Grasa bovina (opcional, para freír)', quantity: 500, unit: 'g', cost: 1 }
                ],
                steps: [
                    'En una olla grande a fuego fuerte, calentar el aceite de oliva y dorar la carne picada.',
                    'Retirar la carne y, en la misma olla, agregar la zanahoria cortada bien chiquita y un poco de sal. Cocinar 5 minutos, luego incorporar el apio cortado chiquito y cocinar 5 minutos más.',
                    'Agregar la cebolla (también cortada chiquita), un poco más de sal y cocinar hasta que las verduras estén transparentes (unos 10 minutos).',
                    'Volver a incorporar la carne, agregar orégano, pimienta y sal, mezclar bien, añadir un chorro de vino tinto y dejar que se evapore (unos 2-3 minutos).',
                    'Incorporar la salsa de tomate y la hoja de laurel, tapar la olla, bajar el fuego al mínimo y cocinar hasta que la salsa no esté líquida (aproximadamente 1 hora), revolviendo cada tanto.',
                    'Sacar la hoja de laurel y dejar enfriar la mezcla.',
                    'Una vez fría, armar las empanadas con las tapas, hacer el repulgue y cocinarlas. Para hornear, precalentar el horno a 200°C y cocinarlas hasta que se doren por ambos lados (unos 20-25 minutos, dándolas vuelta a la mitad). Para freír, calentar grasa bovina (o aceite) y freírlas hasta que estén doradas (unos 3-4 minutos por lado).'
                ]
            },
            {
                id: 'katsudon',
                name: 'Katsudon',
                categoryId: 'principales',
                description: 'Un plato japonés que consiste en una chuleta de cerdo empanada (tonkatsu) sobre arroz, cubierta con huevo y cebolla.',
                image: 'https://images.unsplash.com/photo-1569050467447-ce54b3bbc37d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                servings: 3,
                servingType: 'Porciones',
                time: 45,
                baseCost: 12,
                tags: ['Japonés'],
                ingredients: [
                    { name: 'Solomillo de cerdo', quantity: 500, unit: 'g', cost: 5 },
                    { name: 'Aderezo de arroz', quantity: 50, unit: 'ml', cost: 0.5 },
                    { name: 'Huevos', quantity: 4, unit: 'unidades', cost: 1 },
                    { name: 'Cebolla', quantity: 1, unit: 'unidad', cost: 0.5 },
                    { name: 'Pickles', quantity: 6, unit: 'rodajas', cost: 0.5 },
                    { name: 'Arroz crudo', quantity: 200, unit: 'g', cost: 1 },
                    { name: 'Salsa Katsu', quantity: 1, unit: 'porción', cost: 1.2 },
                    { name: 'Panko', quantity: 100, unit: 'g', cost: 1 },
                    { name: 'Harina', quantity: 50, unit: 'g', cost: 0.2 },
                    { name: 'Aceite para freír', quantity: 500, unit: 'ml', cost: 1 },
                    { name: 'Sal y pimienta', quantity: 1, unit: 'pizca', cost: 0.1 },
                    { name: 'Verdeo y semillas de sésamo', quantity: 1, unit: 'pizca', cost: 0.5 }
                ],
                steps: [
                    'Arroz: Meter el arroz en una olla y lavarlo hasta que el agua sea transparente. Cubrir con agua (2 dedos por encima del arroz) y llevar a fuego medio hasta que hierva. Una vez que hierva, bajar el fuego al mínimo, tapar la olla y dejar cocinar 15 minutos. Sin abrir la tapa, retirar del fuego y dejar reposar 10 minutos más. Preparar el aderezo de arroz calentando vinagre de arroz con sal y azúcar hasta que se disuelvan, y mezclarlo con el arroz cocido.',
                    'Katsu: Limpiar el solomillo, sacar la grasa y cortarlo en 3 pedazos verticales. Abrir cada pedazo para que quede más plano. Pasar cada trozo por una mezcla de harina, sal y pimienta, luego por huevo batido y finalmente por panko. Freír las milanesas en aceite caliente hasta que se doren (unos 3-4 minutos por lado, dependiendo del grosor).',
                    'Emplatado: En un plato hondo, poner una base de arroz, cortar el katsu en tiras horizontales y colocarlo sobre el arroz. Agregar los toppings (cebolla crispy, pickles, verdeo, semillas de sésamo) y cubrir con la salsa Katsu.'
                ]
            },
            {
                id: 'katsu-curry',
                name: 'Katsu Curry',
                categoryId: 'principales',
                description: 'Chuleta de cerdo empanada servida con una cremosa salsa de curry japonés sobre arroz.',
                image: 'https://images.unsplash.com/photo-1604909052743-94e838986d24?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                servings: 3,
                servingType: 'Porciones',
                time: 60,
                baseCost: 14.95,
                tags: ['Japonés', 'Curry'],
                ingredients: [
                    { name: 'Solomillo de cerdo', quantity: 500, unit: 'g', cost: 5 },
                    { name: 'Cebolla (para cebolla crispy)', quantity: 1, unit: 'unidad', cost: 0.5 },
                    { name: 'Arroz crudo', quantity: 200, unit: 'g', cost: 1 },
                    { name: 'Cebollas (para la salsa)', quantity: 3, unit: 'unidades', cost: 1.5 },
                    { name: 'Manzana roja', quantity: 1, unit: 'unidad', cost: 0.5 },
                    { name: 'Caldo de ave', quantity: 1, unit: 'litro', cost: 2 },
                    { name: 'Panko', quantity: 100, unit: 'g', cost: 1 },
                    { name: 'Huevo', quantity: 1, unit: 'unidad', cost: 0.25 },
                    { name: 'Salsa inglesa', quantity: 25, unit: 'ml', cost: 0.3 },
                    { name: 'Curry en polvo', quantity: 25, unit: 'g', cost: 1 },
                    { name: 'Harina', quantity: 75, unit: 'g', cost: 0.3 },
                    { name: 'Manteca', quantity: 100, unit: 'g', cost: 1 },
                    { name: 'Kétchup', quantity: 45, unit: 'ml', cost: 0.2 },
                    { name: 'Salsa de soja', quantity: 15, unit: 'ml', cost: 0.2 },
                    { name: 'Aceite para freír', quantity: 500, unit: 'ml', cost: 1 }
                ],
                steps: [
                    'Arroz y Katsu: Seguir los mismos pasos que en la receta de Katsudon para preparar el arroz y el katsu.',
                    'Salsa Curry: Cortar las 3 cebollas en pluma y caramelizarlas a fuego lento (unos 45 minutos, hasta que estén doradas). Agregar la manzana rallada y las 3 cucharadas de kétchup, cocinar 3 minutos más y luego incorporar la manteca.',
                    'Una vez derretida, agregar los 75 g de harina y los 25 g de curry, mezclar hasta formar una pasta. Incorporar el caldo de ave poco a poco mientras se mezcla, hasta que se forme una crema espesa.',
                    'Agregar la salsa inglesa, la salsa de soja y una cucharadita más de kétchup, y triturar la salsa en una licuadora (dejando un espacio para que salga el vapor).',
                    'Emplatado: En un plato hondo, poner mitad arroz y mitad salsa de curry. Colocar el katsu cortado en tiras por encima y decorar con cebolla crispy.'
                ]
            },
            {
                id: 'risotto',
                name: 'Risotto',
                categoryId: 'principales',
                description: 'Un cremoso risotto con curry, pimentón ahumado y queso, perfecto para una cena especial.',
                image: 'https://images.unsplash.com/photo-1476124369491-e7addf5db371?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                servings: 5,
                servingType: 'Porciones',
                time: 40,
                baseCost: 11.6,
                tags: ['Vegetariano', 'Italiano'],
                ingredients: [
                    { name: 'Arroz carnaroli', quantity: 500, unit: 'g', cost: 3 },
                    { name: 'Cebollas medianas', quantity: 2, unit: 'unidades', cost: 1 },
                    { name: 'Curry en polvo', quantity: 25, unit: 'g', cost: 1 },
                    { name: 'Pimentón ahumado', quantity: 10, unit: 'g', cost: 0.5 },
                    { name: 'Pimienta', quantity: 1, unit: 'pizca', cost: 0.1 },
                    { name: 'Manteca', quantity: 100, unit: 'g', cost: 1 },
                    { name: 'Caldo', quantity: 1, unit: 'litro', cost: 2 },
                    { name: 'Vino blanco', quantity: 100, unit: 'ml', cost: 1 },
                    { name: 'Queso rallado', quantity: 100, unit: 'g', cost: 2 }
                ],
                steps: [
                    'Cortar las cebollas en brunoise (cubitos pequeños). En una olla honda a fuego lento, poner las cebollas con un poco de manteca y sal, y cocinar hasta que estén transparentes (unos 10 minutos).',
                    'Agregar el arroz y mezclar hasta que se vuelva ligeramente transparente (unos 2-3 minutos).',
                    'Incorporar el vino blanco, el curry, el pimentón ahumado y pimienta, y mezclar hasta que el vino se evapore.',
                    'Empezar a agregar el caldo caliente (1 taza a la vez), revolviendo constantemente para que el arroz lo absorba. Seguir agregando caldo y revolviendo hasta que el arroz esté en su punto (unos 18-20 minutos). Al final, debe quedar un poco líquido.',
                    'Apagar el fuego, agregar el queso rallado y la manteca, y mezclar para generar una emulsión cremosa.',
                    'Servir inmediatamente. Se puede acompañar con pollo o con la crema de champiñones y cebolla caramelizada.'
                ]
            },
            {
                id: 'tortilla',
                name: 'Tortilla',
                categoryId: 'principales',
                description: 'Una clásica tortilla española con papas y cebolla caramelizada, jugosa por dentro y dorada por fuera.',
                image: 'https://images.unsplash.com/photo-1607877361964-d8a8f69567d8?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                servings: 4,
                servingType: 'Porciones',
                time: 60,
                baseCost: 5.35,
                tags: ['Vegetariano', 'Español'],
                ingredients: [
                    { name: 'Papas medianas', quantity: 5, unit: 'unidades', cost: 1.5 },
                    { name: 'Huevos', quantity: 9, unit: 'unidades', cost: 2.25 },
                    { name: 'Cebolla mediana', quantity: 1, unit: 'unidad', cost: 0.5 },
                    { name: 'Aceite para freír', quantity: 500, unit: 'ml', cost: 1 },
                    { name: 'Sal', quantity: 1, unit: 'pizca', cost: 0.1 }
                ],
                steps: [
                    'Cortar la cebolla en pluma y caramelizarla a fuego bajo con un poco de aceite (unos 30-40 minutos, hasta que esté dorada).',
                    'Pelar las papas, cortarlas en rodajas finas (vertical y luego horizontalmente) y freírlas en aceite caliente hasta que estén blandas (unos 10-15 minutos).',
                    'Sacarlas, escurrirlas, salarlas y mezclarlas con la cebolla caramelizada en un bowl.',
                    'En una sartén, dorar ligeramente las papas con la cebolla para que tomen color (unos 5 minutos).',
                    'Pasarlas a un bowl, agregar los 9 huevos batidos, mezclar con una cuchara y dejar reposar 5 minutos.',
                    'Calentar una sartén antiadherente a fuego medio, verter la mezcla y moverla para que no se pegue. Cocinar 2-3 minutos, dar vuelta la tortilla y cocinar 1 minuto más del otro lado (queda bien babé, como a mí me gusta).'
                ]
            },
            {
                id: 'lomo-boniato',
                name: 'Lomo con Mar de Boniato y Papas Rejilla',
                categoryId: 'principales',
                description: 'Medallones de lomo sobre una cremosa base de boniato, acompañados de crujientes papas rejilla.',
                image: 'https://images.unsplash.com/photo-1544025162-d76694265947?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                servings: 3,
                servingType: 'Porciones',
                time: 45,
                baseCost: 11.3,
                tags: ['Gourmet', 'Carne'],
                ingredients: [
                    { name: 'Lomo de cerdo', quantity: 500, unit: 'g', cost: 5 },
                    { name: 'Papas medianas', quantity: 5, unit: 'unidades', cost: 1.5 },
                    { name: 'Boniatos medianos', quantity: 3, unit: 'unidades', cost: 1.5 },
                    { name: 'Crema de leche', quantity: 200, unit: 'ml', cost: 1.5 },
                    { name: 'Manteca', quantity: 50, unit: 'g', cost: 0.5 },
                    { name: 'Sal y pimienta', quantity: 1, unit: 'pizca', cost: 0.1 },
                    { name: 'Limón (ralladura)', quantity: 1, unit: 'unidad', cost: 0.2 },
                    { name: 'Aceite para freír', quantity: 500, unit: 'ml', cost: 1 }
                ],
                steps: [
                    'Preparar la crema de boniato (ver receta en Salsas y Cremas).',
                    'Limpiar el lomo y cortarlo en 3 filetes anchos, sazonarlos con sal y pimienta.',
                    'Para las papas rejilla, usar una mandolina para cortar las papas en forma de rejilla, freírlas en aceite caliente hasta que estén doradas (unos 3-4 minutos), sacarlas, salarlas, agregar pimienta y ralladura de limón.',
                    'Calentar una plancha con un poco de manteca, sellar los medallones de lomo por ambos lados y cocinar 5 minutos por lado (a mí me gusta bien rojo).',
                    'Emplatar con una base de crema de boniato, el medallón de lomo encima y las papas rejilla al lado.'
                ]
            },
            {
                id: 'tiramisu',
                name: 'Tiramisú',
                categoryId: 'postres',
                description: 'El clásico postre italiano con capas de bizcochos de soletilla empapados en café y crema de mascarpone.',
                image: 'https://images.unsplash.com/photo-1571877227200-a0d98ea607e9?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                servings: 8,
                servingType: 'Porciones',
                time: 30,
                baseCost: 11.5,
                tags: ['Italiano', 'Sin Hornear'],
                ingredients: [
                    { name: 'Mascarpone', quantity: 500, unit: 'g', cost: 5 },
                    { name: 'Huevos', quantity: 6, unit: 'unidades', cost: 1.5 },
                    { name: 'Café frío', quantity: 200, unit: 'ml', cost: 0.5 },
                    { name: 'Azúcar glas', quantity: 200, unit: 'g', cost: 1 },
                    { name: 'Vainillas', quantity: 36, unit: 'unidades', cost: 3 },
                    { name: 'Cacao en polvo', quantity: 1, unit: 'pizca', cost: 0.5 }
                ],
                steps: [
                    'Separar las yemas de las claras de los 6 huevos.',
                    'En un bowl, batir las yemas con los 200 g de azúcar glas hasta que la mezcla se vuelva blanca (unos 5 minutos).',
                    'Agregar el mascarpone y batir nuevamente hasta que esté homogéneo.',
                    'Montar las claras a punto nieve e incorporarlas de a poco a la mezcla con movimientos envolventes.',
                    'En una fuente (tipo pirex), poner una capa fina de la mezcla, luego una capa de vainillas pasadas por el café frío, verter la mitad de la mezcla, agregar otra capa de vainillas y terminar con el resto de la mezcla.',
                    'Tapar con film (en contacto con la mezcla) y dejar en la heladera por 24 horas.',
                    'Antes de servir, espolvorear con cacao en polvo.'
                ]
            },
            {
                id: 'rolls-canela',
                name: 'Rolls de Canela',
                categoryId: 'postres',
                description: 'Suaves y esponjosos rolls de canela con un delicioso frosting de queso crema.',
                image: 'https://images.unsplash.com/photo-1509365465985-25d11c17e812?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                servings: 12,
                servingType: 'Rolls',
                time: 180,
                baseCost: 9.05,
                tags: ['Horneado', 'Dulce'],
                ingredients: [
                    { name: 'Leche tibia', quantity: 180, unit: 'ml', cost: 0.5 },
                    { name: 'Levadura seca', quantity: 10, unit: 'g', cost: 0.5 },
                    { name: 'Manteca derretida', quantity: 60, unit: 'g', cost: 0.6 },
                    { name: 'Azúcar', quantity: 50, unit: 'g', cost: 0.2 },
                    { name: 'Huevo', quantity: 1, unit: 'unidad', cost: 0.25 },
                    { name: 'Harina', quantity: 340, unit: 'g', cost: 0.5 },
                    { name: 'Manteca pomada (para el relleno)', quantity: 120, unit: 'g', cost: 1.2 },
                    { name: 'Azúcar morena (para el relleno)', quantity: 200, unit: 'g', cost: 1 },
                    { name: 'Canela en polvo (para el relleno)', quantity: 10, unit: 'g', cost: 0.5 },
                    { name: 'Manteca pomada (para el frosting)', quantity: 100, unit: 'g', cost: 1 },
                    { name: 'Azúcar glas (para el frosting)', quantity: 100, unit: 'g', cost: 0.5 },
                    { name: 'Queso crema (para el frosting)', quantity: 250, unit: 'g', cost: 2 },
                    { name: 'Esencia de vainilla (para el frosting)', quantity: 5, unit: 'ml', cost: 0.2 },
                    { name: 'Crema de leche (para los huecos)', quantity: 50, unit: 'ml', cost: 0.3 }
                ],
                steps: [
                    'Mezclar la leche tibia con la levadura, tapar con un paño y dejar activar la levadura por 15 minutos.',
                    'Agregar la manteca derretida, el azúcar, el huevo y la harina, amasar hasta formar una masa suave y dejar levar por 1 hora.',
                    'Pasada la hora, sacar el aire del bollo, estirarlo en forma rectangular, untar la superficie con la manteca pomada, espolvorear el azúcar morena y la canela, y enrollar el rectángulo.',
                    'Cortar en medallones de 3 dedos de ancho (unos 12 rolls), colocarlos en una asadera con papel manteca y dejar levar 30 minutos más.',
                    'Antes de meter al horno, verter un chorro de crema de leche en los huecos. Hornear a 180°C (fuego medio tirando a fuerte) por 30 minutos.',
                    'Para el frosting, mezclar la manteca pomada, el azúcar glas, el queso crema y la esencia de vainilla hasta que esté cremoso.',
                    'Una vez que los rolls salgan del horno, cubrirlos con el frosting y ¡ya taaa!'
                ]
            },
            {
                id: 'cookies',
                name: 'Cookies de Chocolate',
                categoryId: 'postres',
                description: 'Deliciosas cookies con trozos de chocolate, perfectas para acompañar el café o como postre.',
                image: 'https://images.unsplash.com/photo-1499636136210-6f4ee915583e?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                servings: 30,
                servingType: 'Cookies',
                time: 45,
                baseCost: 8.5,
                tags: ['Horneado', 'Dulce'],
                ingredients: [
                    { name: 'Manteca sin sal', quantity: 225, unit: 'g', cost: 2.25 },
                    { name: 'Azúcar blanca', quantity: 175, unit: 'g', cost: 0.7 },
                    { name: 'Azúcar morena', quantity: 175, unit: 'g', cost: 0.7 },
                    { name: 'Huevos', quantity: 2, unit: 'unidades', cost: 0.5 },
                    { name: 'Esencia de vainilla', quantity: 2.5, unit: 'ml', cost: 0.1 },
                    { name: 'Harina común', quantity: 400, unit: 'g', cost: 0.6 },
                    { name: 'Sal', quantity: 0.5, unit: 'cucharadita', cost: 0.05 },
                    { name: 'Bicarbonato de sodio', quantity: 10, unit: 'g', cost: 0.2 },
                    { name: 'Chocolate negro en trozos', quantity: 250, unit: 'g', cost: 2.5 }
                ],
                steps: [
                    'Batir la manteca con el azúcar blanca y morena hasta que la mezcla se ponga más pálida y aireada (unos 3-5 minutos).',
                    'Añadir los huevos y la esencia de vainilla, y mezclar.',
                    'Incorporar la harina, la sal y el bicarbonato de sodio, y mezclar con una espátula (sin batir) hasta formar una masa.',
                    'Agregar 200 g del chocolate en trozos (reservar 50 g para decorar) y mezclar.',
                    'Formar bolas de 1.5 cucharadas, colocarlas en una bandeja y meterlas en el freezer por 30 minutos (o en la heladera por 1 hora) para que solidifiquen.',
                    'Precalentar el horno a 170°C, poner 6 bolas en una bandeja con papel manteca (dejando espacio entre ellas) y hornear por 12 minutos, o hasta que los bordes estén dorados.',
                    'Retirar del horno, darle unos golpecitos a la bandeja para que se asienten y dejar enfriar. Decorar con el chocolate restante si querés.'
                ]
            }
        ];

        // DOM Elements
        const themeToggle = document.getElementById('themeToggle');
        const mobileThemeToggle = document.getElementById('mobileThemeToggle');
        const navbar = document.getElementById('navbar');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const modalTabs = document.querySelectorAll('.modal-tab');
        const modalTabContents = document.querySelectorAll('.modal-tab-content');
        const recipeModal = document.getElementById('recipeModal');
        const closeModal = document.getElementById('closeModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalImage = document.getElementById('modalImage');
        const modalIngredients = document.getElementById('modalIngredients');
        const modalSteps = document.getElementById('modalSteps');
        const servingsInput = document.getElementById('servingsInput');
        const servingType = document.getElementById('servingType');
        const calculateButton = document.getElementById('calculateButton');
        const calculatedIngredients = document.getElementById('calculatedIngredients');
        const calculatedIngredientsList = document.getElementById('calculatedIngredientsList');
        const calculatedTotal = document.getElementById('calculatedTotal');
        const timersContainer = document.getElementById('timersContainer');
        const ingredientSearch = document.getElementById('ingredientSearch');
        const searchSuggestions = document.getElementById('searchSuggestions');
        const selectedIngredients = document.getElementById('selectedIngredients');
        const searchButton = document.getElementById('searchButton');
        const searchResults = document.getElementById('searchResults');
        const scrollDown = document.getElementById('scrollDown');
        const mobileMenuToggle = document.getElementById('mobileMenuToggle');
        const mobileMenu = document.getElementById('mobileMenu');
        const mobileMenuClose = document.getElementById('mobileMenuClose');
        const mobileMenuLinks = document.querySelectorAll('.mobile-menu-link');

        // Current recipe in modal
        let currentRecipe = null;
        let activeTimers = [];

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Populate recipe grids
            populateRecipeGrids();
            
            // Set up event listeners
            setupEventListeners();
            
            // Extract all unique ingredients for search
            setupIngredientSearch();
            
            // Check for saved theme preference
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                themeToggle.textContent = '☀️';
                mobileThemeToggle.textContent = '☀️';
            }
        });

        // Navbar scroll effect
        window.addEventListener('scroll', function() {
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

        // Theme Toggle
        function toggleTheme() {
            if (document.body.classList.contains('dark-mode')) {
                document.body.classList.remove('dark-mode');
                themeToggle.textContent = '🌙';
                mobileThemeToggle.textContent = '🌙';
                localStorage.setItem('theme', 'light');
            } else {
                document.body.classList.add('dark-mode');
                themeToggle.textContent = '☀️';
                mobileThemeToggle.textContent = '☀️';
                localStorage.setItem('theme', 'dark');
            }
        }

        // Mobile Menu Toggle
        function toggleMobileMenu() {
            mobileMenu.classList.toggle('active');
        }

        // Scroll Down
        function scrollToContent() {
            const mainContent = document.querySelector('.main-content');
            mainContent.scrollIntoView({ behavior: 'smooth' });
        }

        // Populate Recipe Grids
        function populateRecipeGrids() {
            categories.forEach(category => {
                const grid = document.getElementById(`${category.id}Grid`);
                const categoryRecipes = recipes.filter(recipe => recipe.categoryId === category.id);
                
                categoryRecipes.forEach(recipe => {
                    grid.appendChild(createRecipeCard(recipe));
                });
            });
        }

        // Create Recipe Card
        function createRecipeCard(recipe) {
            const card = document.createElement('div');
            card.className = 'recipe-card';
            card.dataset.recipeId = recipe.id;
            
            // Create image container
            const imageContainer = document.createElement('div');
            imageContainer.className = 'recipe-image';
            imageContainer.style.backgroundImage = `url('${recipe.image}')`;
            imageContainer.style.backgroundSize = 'cover';
            imageContainer.style.backgroundPosition = 'center';
            
            // Add tags if they exist
            if (recipe.tags && recipe.tags.length > 0) {
                const tagsContainer = document.createElement('div');
                tagsContainer.className = 'recipe-tags';
                
                recipe.tags.forEach(tag => {
                    const tagElement = document.createElement('span');
                    tagElement.className = 'recipe-tag';
                    tagElement.textContent = tag;
                    tagsContainer.appendChild(tagElement);
                });
                
                imageContainer.appendChild(tagsContainer);
            }
            
            // Create content container
            const content = document.createElement('div');
            content.className = 'recipe-content';
            
            // Add title
            const title = document.createElement('h3');
            title.className = 'recipe-title';
            title.textContent = recipe.name;
            
            // Add meta information
            const meta = document.createElement('div');
            meta.className = 'recipe-meta';
            
            const time = document.createElement('div');
            time.className = 'recipe-meta-item';
            time.innerHTML = `<span>⏱️</span> ${recipe.time} min`;
            
            const servings = document.createElement('div');
            servings.className = 'recipe-meta-item';
            servings.innerHTML = `<span>👥</span> ${recipe.servings} ${recipe.servingType || 'Porciones'}`;
            
            const cost = document.createElement('div');
            cost.className = 'recipe-meta-item';
            cost.innerHTML = `<span>💰</span> $${recipe.baseCost.toFixed(2)}`;
            
            meta.appendChild(time);
            meta.appendChild(servings);
            meta.appendChild(cost);
            
            // Add description
            const description = document.createElement('p');
            description.className = 'recipe-description';
            description.textContent = recipe.description;
            
            // Add footer with buttons
            const footer = document.createElement('div');
            footer.className = 'recipe-footer';
            
            const viewButton = document.createElement('button');
            viewButton.className = 'btn';
            viewButton.textContent = 'Ver Receta';
            viewButton.addEventListener('click', () => openRecipeModal(recipe.id));
            
            const expandButton = document.createElement('button');
            expandButton.className = 'btn-icon';
            expandButton.innerHTML = '⌄';
            expandButton.addEventListener('click', function() {
                toggleIngredients(this, recipe);
            });
            
            footer.appendChild(viewButton);
            footer.appendChild(expandButton);
            
            // Assemble content
            content.appendChild(title);
            content.appendChild(meta);
            content.appendChild(description);
            content.appendChild(footer);
            
            // Assemble card
            card.appendChild(imageContainer);
            card.appendChild(content);
            
            return card;
        }

        // Toggle ingredients visibility
        function toggleIngredients(button, recipe) {
            const card = button.closest('.recipe-card');
            let expandedSection = card.querySelector('.expanded-ingredients');
            
            if (expandedSection) {
                card.removeChild(expandedSection);
                button.innerHTML = '⌄';
            } else {
                expandedSection = document.createElement('div');
                expandedSection.className = 'expanded-ingredients';
                
                const title = document.createElement('h4');
                title.textContent = 'Ingredientes principales:';
                
                const chips = document.createElement('div');
                chips.className = 'ingredient-chips';
                
                recipe.ingredients.slice(0, 5).forEach(ingredient => {
                    const chip = document.createElement('span');
                    chip.className = 'ingredient-chip';
                    chip.textContent = ingredient.name;
                    chips.appendChild(chip);
                });
                
                if (recipe.ingredients.length > 5) {
                    const moreChip = document.createElement('span');
                    moreChip.className = 'ingredient-chip';
                    moreChip.textContent = `+${recipe.ingredients.length - 5} más`;
                    chips.appendChild(moreChip);
                }
                
                expandedSection.appendChild(title);
                expandedSection.appendChild(chips);
                card.appendChild(expandedSection);
                button.innerHTML = '⌃';
            }
        }

        // Open Recipe Modal
        function openRecipeModal(recipeId) {
            const recipe = recipes.find(r => r.id === recipeId);
            if (!recipe) return;
            
            currentRecipe = recipe;
            
            // Set modal content
            modalTitle.textContent = recipe.name;
            modalImage.src = recipe.image;
            modalImage.alt = recipe.name;
            
            // Clear previous ingredients and steps
            modalIngredients.innerHTML = '';
            modalSteps.innerHTML = '';
            
            // Add ingredients
            recipe.ingredients.forEach(ingredient => {
                const li = document.createElement('li');
                li.className = 'ingredient-item';
                
                const name = document.createElement('span');
                name.className = 'ingredient-name';
                name.textContent = ingredient.name;
                
                const amount = document.createElement('span');
                amount.className = 'ingredient-amount';
                amount.textContent = `${ingredient.quantity} ${ingredient.unit} ($${ingredient.cost.toFixed(2)})`;
                
                li.appendChild(name);
                li.appendChild(amount);
                modalIngredients.appendChild(li);
            });
            
            // Add steps
            recipe.steps.forEach((step, index) => {
                const li = document.createElement('li');
                li.className = 'step-item';
                li.textContent = step;
                modalSteps.appendChild(li);
            });
            
            // Set up calculator
            servingsInput.value = recipe.servings;
            servingType.textContent = recipe.servingType || 'Porciones';
            calculatedIngredients.classList.add('hidden');
            
            // Set up timers
            setupTimers(recipe);
            
            // Show modal
            recipeModal.style.display = 'block';
            
            // Set active tab to recipe
            modalTabs.forEach(tab => tab.classList.remove('active'));
            modalTabContents.forEach(content => content.classList.remove('active'));
            document.querySelector('.modal-tab[data-tab="recipe"]').classList.add('active');
            document.getElementById('recipeTab').classList.add('active');
            
            // Prevent body scrolling
            document.body.style.overflow = 'hidden';
        }

        // Close Recipe Modal
        function closeRecipeModal() {
            recipeModal.style.display = 'none';
            document.body.style.overflow = '';
            
            // Stop all timers
            activeTimers.forEach(timer => {
                clearInterval(timer.interval);
            });
            activeTimers = [];
        }

        // Setup Timers
        function setupTimers(recipe) {
            timersContainer.innerHTML = '';
            
            // Extract timers from recipe steps
            const timers = [];
            recipe.steps.forEach((step, index) => {
                const timePattern = /(\d+)(?:-(\d+))?\s*minutos?/i;
                const match = step.match(timePattern);
                
                if (match) {
                    const minTime = parseInt(match[1]);
                    const maxTime = match[2] ? parseInt(match[2]) : minTime;
                    // Use average if range is provided
                    const duration = Math.round((minTime + maxTime) / 2);
                    
                    timers.push({
                        id: index + 1,
                        name: `Paso ${index + 1}`,
                        duration: duration * 60, // Convert to seconds
                        remaining: duration * 60,
                        isRunning: false
                    });
                }
            });
            
            if (timers.length === 0) {
                const noTimers = document.createElement('div');
                noTimers.className = 'text-center py-8';
                noTimers.innerHTML = `
                    <div style="font-size: 3rem; margin-bottom: 1rem;">⏱️</div>
                    <p>No se encontraron temporizadores para esta receta.</p>
                    <p style="color: var(--text-light); margin-top: 0.5rem; font-size: 0.9rem;">
                        Los temporizadores se generan automáticamente a partir de los tiempos mencionados en los pasos.
                    </p>
                `;
                timersContainer.appendChild(noTimers);
                return;
            }
            
            // Create timer elements
            timers.forEach(timer => {
                const timerElement = createTimerElement(timer);
                timersContainer.appendChild(timerElement);
            });
        }

        // Create Timer Element
        function createTimerElement(timer) {
            const timerElement = document.createElement('div');
            timerElement.className = 'timer-item';
            timerElement.dataset.timerId = timer.id;
            
            const timerHeader = document.createElement('div');
            timerHeader.className = 'timer-header';
            
            const timerName = document.createElement('div');
            timerName.className = 'timer-name';
            timerName.textContent = timer.name;
            
            const timerTime = document.createElement('div');
            timerTime.className = 'timer-time';
            timerTime.textContent = formatTime(timer.remaining);
            
            timerHeader.appendChild(timerName);
            timerHeader.appendChild(timerTime);
            
            const timerProgress = document.createElement('div');
            timerProgress.className = 'timer-progress';
            
            const timerProgressBar = document.createElement('div');
            timerProgressBar.className = 'timer-progress-bar';
            timerProgressBar.style.width = '100%';
            
            timerProgress.appendChild(timerProgressBar);
            
            const timerControls = document.createElement('div');
            timerControls.className = 'timer-controls';
            
            const startButton = document.createElement('button');
            startButton.className = 'btn';
            startButton.textContent = '▶️ Iniciar';
            startButton.addEventListener('click', () => startTimer(timer.id));
            
            const resetButton = document.createElement('button');
            resetButton.className = 'btn btn-outline';
            resetButton.textContent = '🔄 Reiniciar';
            resetButton.addEventListener('click', () => resetTimer(timer.id));
            
            timerControls.appendChild(startButton);
            timerControls.appendChild(resetButton);
            
            timerElement.appendChild(timerHeader);
            timerElement.appendChild(timerProgress);
            timerElement.appendChild(timerControls);
            
            return timerElement;
        }

        // Format Time (seconds to MM:SS)
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        // Start Timer
        function startTimer(timerId) {
            // Stop any running timers
            activeTimers.forEach(timer => {
                if (timer.id !== timerId) {
                    pauseTimer(timer.id);
                }
            });
            
            // Find timer in active timers
            let timer = activeTimers.find(t => t.id === timerId);
            
            if (!timer) {
                // Create new timer
                const timerElement = document.querySelector(`.timer-item[data-timer-id="${timerId}"]`);
                const timerTime = timerElement.querySelector('.timer-time');
                const timerProgressBar = timerElement.querySelector('.timer-progress-bar');
                const startButton = timerElement.querySelector('.btn:not(.btn-outline)');
                
                // Get duration from current recipe steps
                const step = currentRecipe.steps[timerId - 1];
                const timePattern = /(\d+)(?:-(\d+))?\s*minutos?/i;
                const match = step.match(timePattern);
                
                const minTime = parseInt(match[1]);
                const maxTime = match[2] ? parseInt(match[2]) : minTime;
                const duration = Math.round((minTime + maxTime) / 2) * 60; // Convert to seconds
                
                timer = {
                    id: timerId,
                    duration: duration,
                    remaining: duration,
                    isRunning: true,
                    element: {
                        time: timerTime,
                        progressBar: timerProgressBar,
                        startButton: startButton
                    }
                };
                
                activeTimers.push(timer);
            } else {
                // Resume existing timer
                timer.isRunning = true;
            }
            
            // Update button text
            timer.element.startButton.textContent = '⏸️ Pausar';
            timer.element.startButton.onclick = () => pauseTimer(timerId);
            
            // Start interval
            timer.interval = setInterval(() => {
                if (timer.remaining > 0) {
                    timer.remaining--;
                    timer.element.time.textContent = formatTime(timer.remaining);
                    
                    // Update progress bar
                    const progress = (timer.remaining / timer.duration) * 100;
                    timer.element.progressBar.style.width = `${progress}%`;
                } else {
                    clearInterval(timer.interval);
                    timer.isRunning = false;
                    
                    // Reset button
                    timer.element.startButton.textContent = '▶️ Iniciar';
                    timer.element.startButton.onclick = () => startTimer(timerId);
                    
                    // Play notification sound
                    playNotificationSound();
                }
            }, 1000);
        }

        // Pause Timer
        function pauseTimer(timerId) {
            const timer = activeTimers.find(t => t.id === timerId);
            if (!timer) return;
            
            clearInterval(timer.interval);
            timer.isRunning = false;
            
            // Update button
            timer.element.startButton.textContent = '▶️ Iniciar';
            timer.element.startButton.onclick = () => startTimer(timerId);
        }

        // Reset Timer
        function resetTimer(timerId) {
            const timer = activeTimers.find(t => t.id === timerId);
            if (!timer) return;
            
            clearInterval(timer.interval);
            timer.remaining = timer.duration;
            timer.isRunning = false;
            
            // Update display
            timer.element.time.textContent = formatTime(timer.remaining);
            timer.element.progressBar.style.width = '100%';
            
            // Reset button
            timer.element.startButton.textContent = '▶️ Iniciar';
            timer.element.startButton.onclick = () => startTimer(timerId);
        }

        // Play Notification Sound
        function playNotificationSound() {
            const audio = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3');
            audio.play().catch(e => console.log('Audio play failed:', e));
        }

        // Calculate Recipe
        function calculateRecipe() {
            if (!currentRecipe) return;
            
            const servings = parseInt(servingsInput.value);
            if (isNaN(servings) || servings < 1) {
                servingsInput.value = currentRecipe.servings;
                return;
            }
            
            const factor = servings / currentRecipe.servings;
            let totalCost = 0;
            
            // Clear previous calculations
            calculatedIngredientsList.innerHTML = '';
            
            // Calculate new quantities and costs
            currentRecipe.ingredients.forEach(ingredient => {
                const adjustedQuantity = (ingredient.quantity * factor).toFixed(2);
                const adjustedCost = (ingredient.cost * factor).toFixed(2);
                totalCost += parseFloat(adjustedCost);
                
                const li = document.createElement('li');
                li.className = 'ingredient-item';
                
                const name = document.createElement('span');
                name.className = 'ingredient-name';
                name.textContent = ingredient.name;
                
                const amount = document.createElement('span');
                amount.className = 'ingredient-amount';
                amount.textContent = `${adjustedQuantity} ${ingredient.unit} ($${adjustedCost})`;
                
                li.appendChild(name);
                li.appendChild(amount);
                calculatedIngredientsList.appendChild(li);
            });
            
            // Update total cost
            calculatedTotal.textContent = `$${totalCost.toFixed(2)}`;
            
            // Show calculated ingredients
            calculatedIngredients.classList.remove('hidden');
        }

        // Setup Ingredient Search
        function setupIngredientSearch() {
            // Extract all unique ingredients
            const allIngredients = Array.from(
                new Set(
                    recipes.flatMap(recipe => 
                        recipe.ingredients.map(ingredient => 
                            ingredient.name.toLowerCase()
                        )
                    )
                )
            ).sort();
            
            // Setup input event
            ingredientSearch.addEventListener('input', function() {
                const searchValue = this.value.toLowerCase();
                
                if (searchValue.length < 2) {
                    searchSuggestions.style.display = 'none';
                    return;
                }
                
                // Filter ingredients
                const filteredIngredients = allIngredients.filter(ingredient => 
                    ingredient.includes(searchValue)
                );
                
                // Show suggestions
                if (filteredIngredients.length > 0) {
                    searchSuggestions.innerHTML = '';
                    
                    filteredIngredients.forEach(ingredient => {
                        const item = document.createElement('div');
                        item.className = 'search-suggestion-item';
                        item.textContent = ingredient;
                        item.addEventListener('click', () => {
                            addIngredient(ingredient);
                            ingredientSearch.value = '';
                            searchSuggestions.style.display = 'none';
                        });
                        
                        searchSuggestions.appendChild(item);
                    });
                    
                    searchSuggestions.style.display = 'block';
                } else {
                    searchSuggestions.style.display = 'none';
                }
            });
            
            // Hide suggestions when clicking outside
            document.addEventListener('click', function(e) {
                if (!ingredientSearch.contains(e.target) && !searchSuggestions.contains(e.target)) {
                    searchSuggestions.style.display = 'none';
                }
            });
            
            // Search button click
            searchButton.addEventListener('click', searchRecipes);
        }

        // Add Ingredient to Selected
        function addIngredient(ingredient) {
            // Check if already added
            const existingIngredients = Array.from(selectedIngredients.children).map(tag => 
                tag.textContent.replace(' ×', '').toLowerCase()
            );
            
            if (existingIngredients.includes(ingredient.toLowerCase())) {
                return;
            }
            
            // Create tag
            const tag = document.createElement('div');
            tag.className = 'ingredient-tag';
            tag.textContent = ingredient + ' ×';
            tag.addEventListener('click', function() {
                selectedIngredients.removeChild(this);
            });
            
            selectedIngredients.appendChild(tag);
        }

        // Search Recipes by Ingredients
        function searchRecipes() {
            // Get selected ingredients
            const ingredients = Array.from(selectedIngredients.children).map(tag => 
                tag.textContent.replace(' ×', '').toLowerCase()
            );
            
            if (ingredients.length === 0) {
                searchResults.innerHTML = `
                    <h3 class="search-results-title">Selecciona al menos un ingrediente</h3>
                `;
                return;
            }
            
            // Find matching recipes
            const matchingRecipes = recipes.filter(recipe => {
                const recipeIngredients = recipe.ingredients.map(i => 
                    i.name.toLowerCase()
                );
                
                // Check if any of the selected ingredients are in the recipe
                return ingredients.some(ingredient => 
                    recipeIngredients.includes(ingredient)
                );
            });
            
            // Display results
            if (matchingRecipes.length > 0) {
                searchResults.innerHTML = `
                    <h3 class="search-results-title">Encontramos ${matchingRecipes.length} recetas con tus ingredientes</h3>
                    <div class="recipe-grid" id="searchResultsGrid"></div>
                `;
                
                const grid = document.getElementById('searchResultsGrid');
                matchingRecipes.forEach(recipe => {
                    grid.appendChild(createRecipeCard(recipe));
                });
            } else {
                searchResults.innerHTML = `
                    <h3 class="search-results-title">No encontramos recetas con esos ingredientes</h3>
                    <div class="no-results">
                        <p>Prueba con otros ingredientes o menos específicos.</p>
                    </div>
                `;
            }
        }

        // Setup Event Listeners
        function setupEventListeners() {
            // Theme toggle
            themeToggle.addEventListener('click', toggleTheme);
            mobileThemeToggle.addEventListener('click', toggleTheme);
            
            // Mobile menu
            mobileMenuToggle.addEventListener('click', toggleMobileMenu);
            mobileMenuClose.addEventListener('click', toggleMobileMenu);
            mobileMenuLinks.forEach(link => {
                link.addEventListener('click', toggleMobileMenu);
            });
            
            // Scroll down
            scrollDown.addEventListener('click', scrollToContent);
            
            // Tab switching
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // Update tabs
                    tabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Update content
                    tabContents.forEach(content => content.classList.remove('active'));
                    document.getElementById(`${tabId}Tab`).classList.add('active');
                });
            });
            
            // Modal tab switching
            modalTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // Update tabs
                    modalTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Update content
                    modalTabContents.forEach(content => content.classList.remove('active'));
                    document.getElementById(`${tabId}Tab`).classList.add('active');
                });
            });
            
            // Close modal
            closeModal.addEventListener('click', closeRecipeModal);
            
            // Close modal when clicking outside
            window.addEventListener('click', function(e) {
                if (e.target === recipeModal) {
                    closeRecipeModal();
                }
            });
            
            // Calculate button
            calculateButton.addEventListener('click', calculateRecipe);
            
            // Smooth scroll for navigation links
            document.querySelectorAll('.nav-link, .mobile-menu-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            });
        }
    </script>
</body>
</html>

